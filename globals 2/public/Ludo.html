<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Globals Ludo</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<style>
:root {
  /* Core palette - inspired by GlobalTasks dashboard */
  --navy:    #0d1b2e;
  --navy2:   #122038;
  --navy3:   #1a2d4a;
  --card-bg: #162032;
  --border:  rgba(255,255,255,0.07);
  --text:    #e8f0fe;
  --muted:   #7b92b2;
  --dim:     rgba(255,255,255,0.04);

  /* Accents */
  --orange:  #f97316;
  --orange2: #ea580c;
  --gold:    #f59e0b;
  --gold2:   #d97706;
  --green:   #22c55e;
  --red:     #ef4444;
  --blue:    #3b82f6;
  --cyan:    #06b6d4;

  /* Ludo board colors */
  --ludo-red:    #e53935;
  --ludo-green:  #43a047;
  --ludo-blue:   #1e88e5;
  --ludo-yellow: #fdd835;
  --ludo-red-l:  #ffcdd2;
  --ludo-green-l:#c8e6c9;
  --ludo-blue-l: #bbdefb;
  --ludo-yellow-l:#fff9c4;

  --radius: 16px;
  --font-head: 'Nunito', sans-serif;
  --font-body: 'Space Grotesk', sans-serif;
}

* { box-sizing:border-box; margin:0; padding:0; -webkit-tap-highlight-color:transparent; }
html, body { height:100%; overflow:hidden; background:var(--navy); color:var(--text); font-family:var(--font-body); }

/* â•â•â• SCREENS â•â•â• */
.screen { position:fixed; inset:0; display:none; flex-direction:column; overflow-y:auto; }
.screen.active { display:flex; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#loading {
  background: var(--navy);
  align-items:center;
  justify-content:center;
  gap:28px;
}
.load-board-wrap {
  position:relative;
  width:100px; height:100px;
}
.load-board-wrap canvas {
  border-radius:18px;
  border: 2px solid rgba(255,255,255,0.08);
}
.load-logo {
  font-family: var(--font-head);
  font-size: 2rem;
  font-weight: 900;
  color: var(--text);
  letter-spacing: 3px;
  text-transform:uppercase;
}
.load-sub {
  font-size:.78rem;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:4px;
}
.load-bar-wrap {
  width: 220px;
  height: 3px;
  background: var(--navy3);
  border-radius:99px;
  overflow:hidden;
}
.load-bar {
  height:100%;
  width:0%;
  background:var(--orange);
  border-radius:99px;
  transition:width .08s linear;
}
.load-pct {
  font-family: var(--font-head);
  font-size:.9rem;
  font-weight:700;
  color:var(--muted);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN / HOME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#main {
  background: var(--navy);
  justify-content: flex-start;
  padding-bottom: 0;
}
.main-scroll { width:100%; max-width:480px; margin:0 auto; overflow-y:auto; padding-bottom:90px; }

/* â”€â”€ Top Bar â”€â”€ */
.topbar {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:16px 20px;
  background:rgba(13,27,46,0.97);
  backdrop-filter:blur(16px);
  border-bottom:1px solid var(--border);
  position:sticky; top:0; z-index:10;
}
.topbar-brand {
  display:flex; align-items:center; gap:10px;
}
.brand-icon {
  width:34px; height:34px; border-radius:10px;
  background:var(--orange);
  display:flex; align-items:center; justify-content:center;
  font-size:1.1rem;
}
.brand-name {
  font-family:var(--font-head);
  font-size:1.1rem; font-weight:900;
  color:var(--text);
  letter-spacing:1px;
}
.brand-name span { color:var(--orange); }
.topbar-right { display:flex; align-items:center; gap:8px; }
.user-chip {
  display:flex; align-items:center; gap:8px;
  background:var(--navy3);
  border:1px solid var(--border);
  border-radius:99px;
  padding:5px 12px 5px 6px;
}
.user-ava {
  width:26px; height:26px; border-radius:50%;
  background:linear-gradient(135deg,var(--blue),var(--cyan));
  display:flex; align-items:center; justify-content:center;
  font-family:var(--font-head); font-weight:800; font-size:.75rem;
  color:#fff;
}
.user-name-sm { font-size:.8rem; font-weight:600; color:var(--text); }
.icon-pill {
  width:36px; height:36px; border-radius:10px;
  background:var(--navy3); border:1px solid var(--border);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition:all .2s; color:var(--muted); font-size:1rem;
}
.icon-pill:active { background:var(--navy2); }

/* â”€â”€ Balance Card â”€â”€ */
.balance-card {
  margin:20px 16px 0;
  background:linear-gradient(135deg, #0a1628, #122038, #1a2d4a);
  border: 1px solid rgba(59,130,246,0.2);
  border-radius:20px;
  padding:22px 22px 18px;
  position:relative;
  overflow:hidden;
}
.balance-card::after {
  content:'';
  position:absolute;
  top:-40%; right:-15%;
  width:200px; height:200px;
  background:radial-gradient(circle, rgba(59,130,246,0.12), transparent 70%);
  border-radius:50%;
}
.balance-card::before {
  content:'';
  position:absolute;
  bottom:-30%; left:-10%;
  width:150px; height:150px;
  background:radial-gradient(circle, rgba(249,115,22,0.08), transparent 70%);
  border-radius:50%;
}
.bal-top {
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:4px;
}
.bal-label {
  display:flex; align-items:center; gap:8px;
  font-size:.72rem; text-transform:uppercase;
  letter-spacing:2px; color:var(--muted);
}
.live-dot {
  width:6px; height:6px; border-radius:50%;
  background:var(--green);
  animation:pulse-dot 2s infinite;
}
.bal-add-btn {
  background:var(--orange);
  color:#fff;
  border:none;
  border-radius:99px;
  padding:6px 16px;
  font-family:var(--font-head);
  font-size:.75rem;
  font-weight:800;
  cursor:pointer;
  letter-spacing:.5px;
  transition:all .2s;
  display:flex; align-items:center; gap:4px;
}
.bal-add-btn:active { background:var(--orange2); transform:scale(0.97); }
.bal-amount {
  font-family:var(--font-head);
  font-size:2.6rem;
  font-weight:900;
  color:#fff;
  line-height:1;
  letter-spacing:-1px;
  margin-bottom:2px;
  position:relative; z-index:1;
}
.bal-amount .currency {
  font-size:1.4rem;
  color:rgba(255,255,255,0.6);
  vertical-align:super;
  font-weight:700;
  margin-right:2px;
}
.bal-note {
  font-size:.72rem;
  color:rgba(255,255,255,0.35);
  position:relative; z-index:1;
}
.bal-stats {
  display:flex; gap:12px;
  margin-top:16px;
  padding-top:16px;
  border-top:1px solid rgba(255,255,255,0.06);
  position:relative; z-index:1;
}
.bal-stat {
  flex:1;
  background:rgba(255,255,255,0.04);
  border-radius:10px;
  padding:8px 10px;
  text-align:center;
}
.bal-stat-num {
  font-family:var(--font-head);
  font-size:.95rem; font-weight:800;
  color:var(--text);
}
.bal-stat-lbl {
  font-size:.62rem;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:1px;
  margin-top:2px;
}

/* â”€â”€ Section Header â”€â”€ */
.sec-head {
  display:flex; align-items:center; justify-content:space-between;
  padding:20px 16px 10px;
}
.sec-title {
  font-family:var(--font-head);
  font-size:.7rem; font-weight:800;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:3px;
}

/* â”€â”€ Game Mode Cards â”€â”€ */
.modes-wrap { padding:0 16px; display:flex; flex-direction:column; gap:12px; }
.mode-card {
  border-radius:18px;
  padding:18px;
  cursor:pointer;
  transition:transform .15s, box-shadow .2s;
  display:flex; align-items:center; gap:14px;
  position:relative;
  overflow:hidden;
  border:1px solid var(--border);
}
.mode-card:active { transform:scale(0.98); }
.mode-card.mc-ai   { background:linear-gradient(135deg,#1a0a0a,#2a0f0f); border-color:rgba(239,68,68,0.2); }
.mode-card.mc-friend { background:linear-gradient(135deg,#0a0f1a,#0f1a2a); border-color:rgba(59,130,246,0.2); }
.mode-card.mc-bet  { background:linear-gradient(135deg,#1a1000,#2a1800); border-color:rgba(245,158,11,0.2); }
.mc-icon {
  width:54px; height:54px; border-radius:15px;
  display:flex; align-items:center; justify-content:center;
  font-size:1.5rem; flex-shrink:0;
}
.mc-ai .mc-icon   { background:rgba(239,68,68,0.15); }
.mc-friend .mc-icon { background:rgba(59,130,246,0.15); }
.mc-bet .mc-icon  { background:rgba(245,158,11,0.15); }
.mc-info { flex:1; }
.mc-name {
  font-family:var(--font-head);
  font-size:1.1rem; font-weight:800;
  margin-bottom:3px;
}
.mc-desc { font-size:.78rem; color:var(--muted); line-height:1.4; }
.mc-pill {
  font-size:.65rem; font-weight:700;
  padding:3px 10px; border-radius:99px;
  text-transform:uppercase; letter-spacing:.5px;
  margin-top:8px; display:inline-block;
}
.mc-ai .mc-pill   { background:rgba(239,68,68,0.12); color:#ef4444; }
.mc-friend .mc-pill { background:rgba(59,130,246,0.12); color:#60a5fa; }
.mc-bet .mc-pill  { background:rgba(245,158,11,0.12); color:#f59e0b; }
.mc-arrow {
  color:var(--muted);
  font-size:1.2rem;
  flex-shrink:0;
}

/* â”€â”€ Quick Links â”€â”€ */
.quick-row { display:flex; gap:8px; padding:4px 16px; }
.q-link {
  flex:1;
  background:var(--navy3);
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px 10px;
  cursor:pointer;
  font-size:.78rem;
  color:var(--muted);
  display:flex; flex-direction:column; align-items:center; gap:5px;
  transition:all .2s;
}
.q-link:active { background:var(--navy2); color:var(--text); }
.q-link-icon { font-size:1.2rem; }

/* â”€â”€ Leaderboard Strip â”€â”€ */
.leader-strip {
  margin:0 16px;
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:16px;
  overflow:hidden;
}
.leader-header {
  padding:12px 16px;
  display:flex; align-items:center; gap:8px;
  border-bottom:1px solid var(--border);
}
.leader-title {
  font-family:var(--font-head);
  font-size:.85rem; font-weight:800;
  color:var(--text);
  flex:1;
}
.leader-rows { max-height:140px; overflow:hidden; }
.leader-row {
  display:flex; align-items:center; gap:10px;
  padding:10px 16px;
  border-bottom:1px solid var(--border);
}
.leader-row:last-child { border-bottom:none; }
.leader-rank {
  font-family:var(--font-head); font-size:.8rem; font-weight:800;
  color:var(--muted); width:20px; text-align:center;
}
.leader-ava {
  width:28px; height:28px; border-radius:50%;
  background:linear-gradient(135deg,var(--blue),var(--cyan));
  display:flex; align-items:center; justify-content:center;
  font-size:.7rem; font-weight:700; color:#fff;
}
.leader-uname { flex:1; font-size:.82rem; font-weight:600; }
.leader-amt { font-family:var(--font-head); font-size:.82rem; font-weight:800; color:var(--gold); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#game {
  background:var(--navy);
  overflow:hidden;
  justify-content:flex-start;
}
.game-header {
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px;
  background:rgba(13,27,46,0.98);
  border-bottom:1px solid var(--border);
  flex-shrink:0; position:relative; z-index:5;
}
.gh-left { display:flex; align-items:center; gap:10px; }
.back-btn {
  width:34px; height:34px; border-radius:10px;
  background:var(--navy3); border:1px solid var(--border);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; font-size:1.1rem; color:var(--muted);
}
.game-title-header {
  font-family:var(--font-head);
  font-size:1rem; font-weight:800;
}
.gh-badge {
  font-size:.68rem; font-weight:700;
  padding:3px 10px; border-radius:99px;
  text-transform:uppercase; letter-spacing:1px;
}
.badge-ai     { background:rgba(239,68,68,0.15); color:#ef4444; }
.badge-friend { background:rgba(59,130,246,0.15); color:#60a5fa; }
.badge-bet    { background:rgba(245,158,11,0.15); color:#f59e0b; }
.gh-actions { display:flex; gap:6px; }
.gh-btn {
  width:32px; height:32px; border-radius:9px;
  background:var(--navy3); border:1px solid var(--border);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; color:var(--muted); font-size:.85rem;
}

/* â”€â”€ Player Panels â”€â”€ */
.player-panels {
  display:flex; gap:10px;
  padding:10px 12px;
  flex-shrink:0;
}
.pp {
  flex:1;
  background:var(--card-bg);
  border:1.5px solid var(--border);
  border-radius:14px;
  padding:10px 12px;
  position:relative;
  transition:all .3s;
  overflow:hidden;
}
.pp.active-turn { border-color:var(--gold); }
.pp.active-turn::before {
  content:'';
  position:absolute; inset:0;
  background:rgba(245,158,11,0.04);
  border-radius:14px;
}
.pp-color-bar {
  position:absolute; left:0; top:0; bottom:0;
  width:3px; border-radius:3px 0 0 3px;
}
.pp.p1 .pp-color-bar { background:var(--ludo-red); }
.pp.p2 .pp-color-bar { background:var(--ludo-green); }
.pp-content { padding-left:6px; }
.pp-name {
  font-size:.72rem; font-weight:600;
  color:var(--muted); text-transform:uppercase;
  letter-spacing:1px;
}
.pp-score {
  font-family:var(--font-head);
  font-size:1rem; font-weight:800;
  margin-top:1px;
}
.pp-timer-wrap {
  position:absolute; right:10px; top:50%;
  transform:translateY(-50%);
  display:none;
}
.pp-timer-ring {
  position:relative;
  width:38px; height:38px;
}
.pp-timer-ring svg {
  transform:rotate(-90deg);
  width:38px; height:38px;
}
.timer-bg { fill:none; stroke:rgba(255,255,255,0.06); stroke-width:3; }
.timer-arc { fill:none; stroke:var(--gold); stroke-width:3; stroke-linecap:round;
  stroke-dasharray:100; stroke-dashoffset:0; transition:stroke-dashoffset .9s linear; }
.timer-arc.urgent { stroke:var(--red); animation:blink .5s infinite; }
.pp-timer-num {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-family:var(--font-head); font-size:.75rem; font-weight:900;
  color:var(--gold);
}
.pp-timer-num.urgent { color:var(--red); }

/* â”€â”€ Board wrap â”€â”€ */
.board-wrap {
  flex:1;
  display:flex; align-items:center; justify-content:center;
  padding:4px 8px;
  overflow:hidden;
}
#gameCanvas {
  border-radius:14px;
  box-shadow:0 8px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.05);
  max-width:100%; max-height:100%;
  cursor:pointer;
  display:block;
}

/* â”€â”€ Status bar â”€â”€ */
.game-status {
  padding:6px 14px;
  flex-shrink:0;
}
.status-msg {
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:99px;
  padding:7px 16px;
  font-size:.78rem; font-weight:600;
  text-align:center;
  color:var(--muted);
  transition:color .3s;
}
.status-msg.my-turn { color:var(--gold); border-color:rgba(245,158,11,0.2); }
.status-msg.capture { color:var(--red); border-color:rgba(239,68,68,0.2); }

/* â”€â”€ Game Controls â”€â”€ */
.game-controls {
  padding:8px 12px 16px;
  display:flex; gap:10px; align-items:center;
  flex-shrink:0;
}
.dice-zone {
  display:flex; flex-direction:column; align-items:center; gap:4px;
  flex-shrink:0;
}
#diceCanvas {
  border-radius:12px;
  cursor:pointer;
  box-shadow:0 4px 16px rgba(0,0,0,0.4);
  transition:transform .1s;
}
#diceCanvas:active { transform:scale(0.95); }
.dice-hint {
  font-size:.65rem; color:var(--muted);
  text-align:center; max-width:65px;
  line-height:1.3;
}
.actions-col { flex:1; display:flex; flex-direction:column; gap:7px; }
.roll-btn {
  width:100%; padding:14px;
  border-radius:13px; border:none;
  font-family:var(--font-head);
  font-size:1.05rem; font-weight:800;
  letter-spacing:1px; cursor:pointer;
  transition:all .2s;
  background:var(--orange);
  color:#fff;
  box-shadow:0 4px 20px rgba(249,115,22,0.3);
}
.roll-btn:disabled {
  background:var(--navy3);
  color:var(--muted);
  box-shadow:none;
  cursor:not-allowed;
}
.roll-btn:not(:disabled):active { transform:scale(0.98); }
.control-row { display:flex; gap:7px; }
.ctrl-btn {
  flex:1; padding:9px 6px;
  background:var(--navy3);
  border:1px solid var(--border);
  border-radius:11px;
  font-family:var(--font-body);
  font-size:.75rem; font-weight:600;
  color:var(--muted); cursor:pointer;
  transition:all .2s;
  display:flex; align-items:center; justify-content:center; gap:4px;
}
.ctrl-btn:active { background:var(--navy2); color:var(--text); }
.ctrl-btn.danger { border-color:rgba(239,68,68,0.2); color:rgba(239,68,68,0.6); }
.ctrl-btn.danger:active { background:rgba(239,68,68,0.08); color:var(--red); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WIN SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#winScreen {
  background: var(--navy);
  align-items:center; justify-content:center;
  z-index:200;
}
.win-content { display:flex; flex-direction:column; align-items:center; gap:18px; padding:24px; }
.win-trophy-wrap { animation:pop-in .5s cubic-bezier(.34,1.56,.64,1); }
.win-title {
  font-family:var(--font-head);
  font-size:2.4rem; font-weight:900;
  color:var(--text);
  letter-spacing:2px;
  text-align:center;
}
.win-subtitle { font-size:.95rem; color:var(--muted); text-align:center; }
.win-prize {
  display:none;
  font-family:var(--font-head);
  font-size:1.8rem; font-weight:900;
  color:var(--green);
  text-align:center;
}
.confetti-c { position:fixed; inset:0; pointer-events:none; z-index:199; overflow:hidden; }
.win-btns { display:flex; flex-direction:column; gap:10px; width:100%; max-width:280px; margin-top:8px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODALS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal {
  position:fixed; inset:0;
  display:none; align-items:flex-end; justify-content:center;
  z-index:100;
}
.modal.open {
  display:flex;
  background:rgba(0,0,0,0.75);
  backdrop-filter:blur(6px);
}
.modal-sheet {
  width:100%; max-width:480px;
  background:var(--navy2);
  border-top-left-radius:24px;
  border-top-right-radius:24px;
  border:1px solid var(--border); border-bottom:none;
  padding:0 0 env(safe-area-inset-bottom, 24px);
  max-height:92vh; overflow-y:auto;
  animation:slide-up .3s cubic-bezier(.34,1.56,.64,1);
}
.sheet-handle { width:36px; height:3px; background:var(--border); border-radius:99px; margin:12px auto; }
.sheet-title {
  font-family:var(--font-head);
  font-size:1.4rem; font-weight:900;
  padding:10px 22px 4px;
}
.sheet-sub { font-size:.82rem; color:var(--muted); padding:0 22px 16px; }
.sheet-body { padding:0 22px; }

/* â”€â”€ Form â”€â”€ */
.form-lbl { font-size:.72rem; color:var(--muted); text-transform:uppercase; letter-spacing:1.5px; margin-bottom:8px; display:block; }
.form-inp {
  width:100%;
  background:var(--navy3);
  border:1.5px solid var(--border);
  border-radius:12px;
  padding:14px 16px;
  color:var(--text);
  font-family:var(--font-body);
  font-size:1rem;
  outline:none;
  transition:border-color .2s;
}
.form-inp:focus { border-color:var(--orange); }
.form-inp::placeholder { color:var(--muted); }

/* â”€â”€ Room Code Input (4 separate boxes) â”€â”€ */
.code-inputs {
  display:flex; gap:10px; justify-content:center;
  margin:16px 0;
}
.code-box {
  width:58px; height:62px;
  background:var(--navy3);
  border:2px solid var(--border);
  border-radius:14px;
  display:flex; align-items:center; justify-content:center;
  font-family:var(--font-head);
  font-size:1.8rem; font-weight:900;
  color:var(--text);
  cursor:pointer;
  transition:all .2s;
}
.code-box.filled { border-color:var(--orange); color:var(--orange); }
/* Hidden actual input */
#joinCodeInputHidden { position:absolute; opacity:0; width:0; height:0; }

/* â”€â”€ Buttons â”€â”€ */
.btn {
  width:100%; padding:14px;
  border-radius:13px; border:none;
  font-family:var(--font-head);
  font-size:1rem; font-weight:800;
  cursor:pointer; transition:all .2s;
  letter-spacing:.5px; text-transform:uppercase;
}
.btn + .btn { margin-top:10px; }
.btn-orange { background:var(--orange); color:#fff; box-shadow:0 4px 16px rgba(249,115,22,0.3); }
.btn-orange:active { background:var(--orange2); transform:scale(0.98); }
.btn-gold { background:var(--gold); color:#1a0800; box-shadow:0 4px 16px rgba(245,158,11,0.3); }
.btn-gold:active { background:var(--gold2); transform:scale(0.98); }
.btn-blue { background:var(--blue); color:#fff; box-shadow:0 4px 16px rgba(59,130,246,0.3); }
.btn-blue:active { opacity:.9; transform:scale(0.98); }
.btn-red { background:var(--red); color:#fff; box-shadow:0 4px 16px rgba(239,68,68,0.3); }
.btn-red:active { opacity:.9; transform:scale(0.98); }
.btn-outline { background:transparent; border:1.5px solid var(--border); color:var(--muted); }
.btn-outline:active { background:var(--dim); color:var(--text); }
.btn:disabled { background:var(--navy3); color:var(--muted); box-shadow:none; cursor:not-allowed; }

/* â”€â”€ Option Grid â”€â”€ */
.opt-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:16px; }
.opt-item {
  background:var(--navy3);
  border:2px solid var(--border);
  border-radius:14px;
  padding:14px 12px;
  cursor:pointer; transition:all .2s;
  text-align:center;
}
.opt-item.sel { border-color:var(--orange); background:rgba(249,115,22,0.06); }
.opt-icon { font-size:1.4rem; margin-bottom:6px; }
.opt-label { font-family:var(--font-head); font-size:.9rem; font-weight:700; }
.opt-desc { font-size:.7rem; color:var(--muted); margin-top:2px; }

/* â”€â”€ Bet Cards â”€â”€ */
.bet-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:16px; }
.bet-card {
  background:var(--navy3);
  border:2px solid var(--border);
  border-radius:14px;
  padding:14px;
  cursor:pointer; transition:all .2s;
  position:relative; overflow:hidden;
}
.bet-card.sel { border-color:var(--gold); }
.bet-card.sel::before { content:''; position:absolute; inset:0; background:rgba(245,158,11,0.05); }
.bet-stake { font-family:var(--font-head); font-size:1.2rem; font-weight:800; }
.bet-stake-lbl { font-size:.7rem; color:var(--muted); font-weight:400; margin-left:2px; }
.bet-win { font-size:.78rem; color:var(--green); margin-top:4px; font-weight:600; }
.bet-badge {
  position:absolute; top:8px; right:8px;
  font-size:.6rem; font-weight:700;
  padding:2px 7px; border-radius:99px;
  text-transform:uppercase; letter-spacing:.5px;
  background:rgba(245,158,11,0.1); color:var(--gold);
}

/* â”€â”€ Matchmaking Box â”€â”€ */
#matchmakingModal { align-items:center; }
.match-box {
  background:var(--navy2);
  border:1px solid var(--border);
  border-radius:20px;
  padding:30px 24px;
  text-align:center;
  max-width:320px; width:90%;
  animation:fade-in .3s ease;
}
.spin-ring {
  width:60px; height:60px; border-radius:50%;
  border:3px solid var(--border);
  border-top-color:var(--orange);
  animation:spin 1s linear infinite;
  margin:0 auto 20px;
}
.match-title { font-family:var(--font-head); font-size:1.3rem; font-weight:800; margin-bottom:8px; }
.match-desc { font-size:.82rem; color:var(--muted); line-height:1.5; margin-bottom:16px; }
.match-stake { font-family:var(--font-head); font-size:1.1rem; color:var(--gold); margin-bottom:6px; }
.match-timer { font-size:.75rem; color:var(--muted); }

/* â”€â”€ Room Waiting â”€â”€ */
.room-code-box {
  background:var(--navy3);
  border:1px solid var(--border);
  border-radius:16px;
  padding:20px; text-align:center;
  margin:12px 0;
}
.room-code-digits {
  font-family:var(--font-head);
  font-size:2.8rem; font-weight:900;
  letter-spacing:14px;
  color:var(--orange);
  margin-bottom:4px;
}
.room-code-hint {
  font-size:.72rem; color:var(--muted);
  text-transform:uppercase; letter-spacing:2px;
}
.room-share-btn {
  margin-top:10px;
  background:rgba(249,115,22,0.1);
  border:1px solid rgba(249,115,22,0.2);
  border-radius:99px;
  padding:6px 16px;
  font-size:.78rem; font-weight:600;
  color:var(--orange); cursor:pointer;
  display:inline-flex; align-items:center; gap:6px;
}
.room-players { display:flex; gap:10px; margin:10px 0; }
.rp-slot {
  flex:1; background:var(--navy3); border:1px solid var(--border);
  border-radius:12px; padding:12px; text-align:center;
  font-size:.8rem; color:var(--muted);
}
.rp-slot.rp-filled { border-color:var(--green); color:var(--green); }
.rp-icon { font-size:1.2rem; margin-bottom:4px; }

/* â”€â”€ Settings â”€â”€ */
.settings-row {
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 0; border-bottom:1px solid var(--border);
}
.settings-row:last-of-type { border-bottom:none; }
.sr-label { font-size:.9rem; font-weight:600; }
.sr-desc { font-size:.73rem; color:var(--muted); margin-top:2px; }
.toggle {
  width:46px; height:25px; border-radius:99px;
  background:var(--navy3); border:1px solid var(--border);
  position:relative; cursor:pointer; transition:background .2s;
}
.toggle.on { background:var(--orange); border-color:var(--orange); }
.toggle-knob {
  width:19px; height:19px; border-radius:50%; background:#fff;
  position:absolute; top:2px; left:2px; transition:transform .2s;
}
.toggle.on .toggle-knob { transform:translateX(21px); }

/* â”€â”€ Chat â”€â”€ */
.chat-msgs {
  flex:1; overflow-y:auto; padding:12px 18px;
  display:flex; flex-direction:column; gap:10px;
}
.chat-msg { max-width:82%; }
.chat-msg.ai { align-self:flex-start; }
.chat-msg.user { align-self:flex-end; }
.chat-bubble {
  padding:10px 14px; border-radius:14px;
  font-size:.85rem; line-height:1.5;
}
.chat-msg.ai .chat-bubble {
  background:var(--navy3); border:1px solid var(--border);
  border-bottom-left-radius:4px;
}
.chat-msg.user .chat-bubble {
  background:rgba(249,115,22,0.15);
  border:1px solid rgba(249,115,22,0.25);
  border-bottom-right-radius:4px;
}
.chat-in-row {
  padding:10px 18px; border-top:1px solid var(--border);
  display:flex; gap:10px;
}
.chat-in {
  flex:1; background:var(--navy3);
  border:1.5px solid var(--border);
  border-radius:10px; padding:9px 14px;
  color:var(--text); font-family:var(--font-body); font-size:.88rem;
  outline:none;
}
.chat-in:focus { border-color:var(--orange); }
.chat-send-btn {
  background:var(--orange); color:#fff; border:none;
  border-radius:10px; padding:9px 14px;
  font-family:var(--font-head); font-weight:700; font-size:.85rem;
  cursor:pointer;
}

/* â”€â”€ Tutorial Steps â”€â”€ */
.tut-step {
  background:var(--navy3); border:1px solid var(--border);
  border-radius:14px; padding:14px; margin-bottom:10px;
  display:flex; gap:12px; align-items:flex-start;
}
.tut-num {
  width:30px; height:30px; border-radius:50%;
  background:var(--orange); color:#fff;
  font-family:var(--font-head); font-weight:800; font-size:.88rem;
  display:flex; align-items:center; justify-content:center; flex-shrink:0;
}
.tut-text h4 { font-family:var(--font-head); font-size:.95rem; font-weight:700; margin-bottom:4px; }
.tut-text p { font-size:.78rem; color:var(--muted); line-height:1.5; }

/* â”€â”€ Legal â”€â”€ */
.legal-sec { margin-bottom:18px; }
.legal-sec h3 { font-family:var(--font-head); font-size:.95rem; font-weight:700; color:var(--orange); margin-bottom:6px; }
.legal-sec p { font-size:.78rem; color:var(--muted); line-height:1.6; }
.legal-warn {
  background:rgba(239,68,68,0.06); border:1px solid rgba(239,68,68,0.15);
  border-radius:12px; padding:12px; margin:12px 0;
  font-size:.78rem; color:rgba(239,68,68,0.8); line-height:1.5;
}

/* â”€â”€ Quit confirm â”€â”€ */
#quitConfirmModal { align-items:center; }
.dialog-box {
  background:var(--navy2); border:1px solid var(--border);
  border-radius:20px; padding:28px 22px; text-align:center;
  max-width:320px; width:90%;
  animation:fade-in .3s ease;
}
.dialog-icon { font-size:2.5rem; margin-bottom:12px; }
.dialog-title { font-family:var(--font-head); font-size:1.3rem; font-weight:800; margin-bottom:8px; }
.dialog-desc { font-size:.82rem; color:var(--muted); line-height:1.5; margin-bottom:20px; }

/* â”€â”€ No internet â”€â”€ */
#noInternetModal { align-items:center; }
.offline-box {
  background:var(--navy2); border:1px solid rgba(239,68,68,0.2);
  border-radius:20px; padding:28px 22px; text-align:center;
  max-width:280px; width:90%;
}

/* â”€â”€ Divider â”€â”€ */
.divider { height:1px; background:var(--border); margin:14px 0; }

/* â”€â”€ Toast â”€â”€ */
.toast {
  position:fixed; bottom:80px; left:50%; transform:translateX(-50%);
  background:var(--navy2); border:1px solid var(--border);
  border-radius:12px; padding:10px 18px;
  font-size:.82rem; font-weight:600;
  white-space:nowrap; z-index:999;
  opacity:0; pointer-events:none;
  transition:opacity .25s, bottom .25s;
  max-width:90%;
}
.toast.show { opacity:1; bottom:90px; }
.toast.success { border-color:rgba(34,197,94,0.3); color:var(--green); }
.toast.error   { border-color:rgba(239,68,68,0.3); color:var(--red); }
.toast.warning { border-color:rgba(245,158,11,0.3); color:var(--gold); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes fade-in { from { opacity:0 } to { opacity:1 } }
@keyframes slide-up { from { transform:translateY(100%) } to { transform:translateY(0) } }
@keyframes pop-in { from { transform:scale(0);opacity:0 } to { transform:scale(1);opacity:1 } }
@keyframes spin { to { transform:rotate(360deg) } }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }
@keyframes pulse-dot { 0%,100%{opacity:1} 50%{opacity:0.3} }
@keyframes confetti-fall {
  from { transform:translateY(-20px) rotate(0deg); opacity:1 }
  to   { transform:translateY(100vh) rotate(720deg); opacity:0 }
}

/* â”€â”€ Responsive â”€â”€ */
@media (max-height: 680px) {
  .game-header { padding:8px 14px; }
  .player-panels { padding:6px 10px; gap:8px; }
  .game-controls { padding:6px 10px 10px; }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LOADING SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen active" id="loading">
  <div class="load-board-wrap">
    <canvas id="ludominiCanvas" width="100" height="100"></canvas>
  </div>
  <div class="load-logo">GLOBALS <span style="color:var(--orange)">LUDO</span></div>
  <div class="load-sub">Your Gaming Arena</div>
  <div class="load-bar-wrap"><div class="load-bar" id="progressFill"></div></div>
  <div class="load-pct" id="progressPct">0%</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="main">
  <div class="main-scroll">

    <!-- Top Bar -->
    <div class="topbar">
      <div class="topbar-brand">
        <div class="brand-icon">ğŸ²</div>
        <div class="brand-name">Globals <span>Ludo</span></div>
      </div>
      <div class="topbar-right">
        <div class="user-chip">
          <div class="user-ava" id="userAvatarMain">G</div>
          <div class="user-name-sm" id="usernameDisplay">Player</div>
        </div>
        <div class="icon-pill" id="settingsBtn" title="Settings">âš™ï¸</div>
        <div class="icon-pill" id="mainChatBtn" title="Support">ğŸ’¬</div>
      </div>
    </div>

    <!-- Balance Card -->
    <div class="balance-card">
      <div class="bal-top">
        <div class="bal-label">
          <div class="live-dot"></div>
          Total Balance
        </div>
        <button class="bal-add-btn" onclick="showToast('Deposit via Globals main app','warning')">
          + Add Money
        </button>
      </div>
      <div class="bal-amount">
        <span class="currency">â‚¦</span><span id="mainBalance">0.00</span>
      </div>
      <div class="bal-note">Available for betting Â· Real-time</div>
      <div class="bal-stats">
        <div class="bal-stat">
          <div class="bal-stat-num" id="statWins">0</div>
          <div class="bal-stat-lbl">Wins</div>
        </div>
        <div class="bal-stat">
          <div class="bal-stat-num" id="statGames">0</div>
          <div class="bal-stat-lbl">Games</div>
        </div>
        <div class="bal-stat">
          <div class="bal-stat-num" id="statEarned">â‚¦0</div>
          <div class="bal-stat-lbl">Earned</div>
        </div>
      </div>
    </div>

    <!-- Game Modes -->
    <div class="sec-head">
      <div class="sec-title">Choose Your Mode</div>
    </div>
    <div class="modes-wrap">
      <div class="mode-card mc-ai" id="vsComputerBtn">
        <div class="mc-icon">ğŸ¤–</div>
        <div class="mc-info">
          <div class="mc-name">vs Computer</div>
          <div class="mc-desc">Challenge our smart AI in 4 difficulty levels</div>
          <span class="mc-pill">Free Play</span>
        </div>
        <div class="mc-arrow">â€º</div>
      </div>
      <div class="mode-card mc-friend" id="vsFriendBtn">
        <div class="mc-icon">ğŸ‘¥</div>
        <div class="mc-info">
          <div class="mc-name">vs Friend</div>
          <div class="mc-desc">Create a room & share your 4-digit code</div>
          <span class="mc-pill">Multiplayer</span>
        </div>
        <div class="mc-arrow">â€º</div>
      </div>
      <div class="mode-card mc-bet" id="betModeBtn">
        <div class="mc-icon">ğŸ’°</div>
        <div class="mc-info">
          <div class="mc-name">Bet &amp; Win</div>
          <div class="mc-desc">Stake real â‚¦ against matched opponents</div>
          <span class="mc-pill">Real Money</span>
        </div>
        <div class="mc-arrow">â€º</div>
      </div>
    </div>

    <!-- Quick Links -->
    <div class="sec-head" style="margin-top:8px">
      <div class="sec-title">More</div>
    </div>
    <div class="quick-row">
      <div class="q-link" id="tutorialBtn">
        <div class="q-link-icon">ğŸ“–</div>
        How to Play
      </div>
      <div class="q-link" id="termsBtn">
        <div class="q-link-icon">ğŸ“œ</div>
        Terms
      </div>
      <div class="q-link" id="privacyBtn">
        <div class="q-link-icon">ğŸ”’</div>
        Privacy
      </div>
    </div>

    <!-- Recent Wins / Leaderboard strip -->
    <div style="padding:8px 0 4px">
      <div class="sec-head">
        <div class="sec-title">Recent Winners</div>
      </div>
      <div class="leader-strip">
        <div id="leaderRows" class="leader-rows">
          <div class="leader-row">
            <div class="leader-rank">ğŸ¥‡</div>
            <div class="leader-ava">A</div>
            <div class="leader-uname">Loadingâ€¦</div>
            <div class="leader-amt">â€”</div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- /main-scroll -->
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GAME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="game">
  <div class="game-header">
    <div class="gh-left">
      <div class="back-btn" id="quitBtn">â€¹</div>
      <div class="game-title-header">Globals Ludo</div>
      <span class="gh-badge badge-ai" id="gameModeLabel">vs AI</span>
    </div>
    <div class="gh-actions">
      <div class="gh-btn" id="gameChatBtn" title="Support">ğŸ’¬</div>
      <div class="gh-btn" id="gameSettingsBtn" title="Settings">âš™ï¸</div>
    </div>
  </div>

  <div class="player-panels">
    <div class="pp p1" id="panel1">
      <div class="pp-color-bar"></div>
      <div class="pp-content">
        <div class="pp-name" id="pp1name">You</div>
        <div class="pp-score" id="pp1score">0 / 4</div>
      </div>
      <div class="pp-timer-wrap" id="pp1timerWrap">
        <div class="pp-timer-ring">
          <svg viewBox="0 0 38 38">
            <circle class="timer-bg" cx="19" cy="19" r="15"/>
            <circle class="timer-arc" id="timerArc1" cx="19" cy="19" r="15"
              style="stroke-dasharray:94.2; stroke-dashoffset:0;"/>
          </svg>
          <div class="pp-timer-num" id="pp1timerNum">10</div>
        </div>
      </div>
    </div>
    <div class="pp p2" id="panel2">
      <div class="pp-color-bar"></div>
      <div class="pp-content">
        <div class="pp-name" id="pp2name">AI</div>
        <div class="pp-score" id="pp2score">0 / 4</div>
      </div>
      <div class="pp-timer-wrap" id="pp2timerWrap">
        <div class="pp-timer-ring">
          <svg viewBox="0 0 38 38">
            <circle class="timer-bg" cx="19" cy="19" r="15"/>
            <circle class="timer-arc" id="timerArc2" cx="19" cy="19" r="15"
              style="stroke-dasharray:94.2; stroke-dashoffset:0;"/>
          </svg>
          <div class="pp-timer-num" id="pp2timerNum">10</div>
        </div>
      </div>
    </div>
  </div>

  <div class="board-wrap">
    <canvas id="gameCanvas"></canvas>
  </div>

  <div class="game-status">
    <div class="status-msg" id="statusText">Roll the dice!</div>
  </div>

  <div class="game-controls">
    <div class="dice-zone">
      <canvas id="diceCanvas" width="64" height="64"></canvas>
      <div class="dice-hint" id="diceLabel">Tap to roll</div>
    </div>
    <div class="actions-col">
      <button class="roll-btn" id="rollBtn">ğŸ² ROLL DICE</button>
      <div class="control-row">
        <button class="ctrl-btn" id="quitGameBtn" style="flex:none;padding:9px 12px;" title="Quit">ğŸšª</button>
        <div id="gameStatusBar" style="flex:1;display:flex;align-items:center;justify-content:center;font-size:.72rem;color:var(--muted);">Game on!</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     WIN SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="winScreen">
  <div class="confetti-c" id="confettiContainer"></div>
  <div class="win-content">
    <div class="win-trophy-wrap" style="font-size:5rem">ğŸ†</div>
    <div class="win-title" id="winTitle">YOU WIN!</div>
    <div class="win-subtitle" id="winSubtitle">Outstanding strategy!</div>
    <div class="win-prize" id="winAmount">+â‚¦<span id="winAmountNum">0</span></div>
    <div class="win-btns">
      <button class="btn btn-orange" id="winPlayAgain">â–¶ Play Again</button>
      <button class="btn btn-outline" id="winMainMenu">â† Main Menu</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODALS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<!-- vs Computer -->
<div class="modal" id="computerModal">
  <div class="modal-sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-title">ğŸ¤– vs Computer</div>
    <div class="sheet-sub">Select difficulty and board style</div>
    <div class="sheet-body">
      <div class="form-lbl">Difficulty</div>
      <div class="opt-grid" id="difficultyGrid">
        <div class="opt-item sel" data-diff="easy">
          <div class="opt-icon">ğŸ˜Š</div><div class="opt-label">Easy</div><div class="opt-desc">Beginner friendly</div>
        </div>
        <div class="opt-item" data-diff="medium">
          <div class="opt-icon">ğŸ¤”</div><div class="opt-label">Medium</div><div class="opt-desc">Fair challenge</div>
        </div>
        <div class="opt-item" data-diff="hard">
          <div class="opt-icon">ğŸ”¥</div><div class="opt-label">Hard</div><div class="opt-desc">Pro AI strategy</div>
        </div>
        <div class="opt-item" data-diff="expert">
          <div class="opt-icon">ğŸ‘¹</div><div class="opt-label">Expert</div><div class="opt-desc">Nearly unbeatable</div>
        </div>
      </div>
      <div class="form-lbl" style="margin-top:4px">Board Style</div>
      <div class="opt-grid" id="boardStyleGrid">
        <div class="opt-item sel" data-style="classic">
          <div class="opt-icon">ğŸ¯</div><div class="opt-label">Classic</div><div class="opt-desc">4 tokens each</div>
        </div>
        <div class="opt-item" data-style="double">
          <div class="opt-icon">â™Ÿ</div><div class="opt-label">Double</div><div class="opt-desc">8 tokens each</div>
        </div>
      </div>
      <button class="btn btn-orange" id="startComputerGame" style="margin-top:4px">Start Game ğŸ®</button>
      <div style="height:16px"></div>
    </div>
  </div>
</div>

<!-- vs Friend -->
<div class="modal" id="friendModal">
  <div class="modal-sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-title">ğŸ‘¥ vs Friend</div>
    <div class="sheet-sub">Host or join a private room</div>
    <div class="sheet-body">
      <div class="opt-grid" id="friendModeGrid">
        <div class="opt-item sel" data-fmode="host">
          <div class="opt-icon">ğŸ </div><div class="opt-label">Host</div><div class="opt-desc">Create room</div>
        </div>
        <div class="opt-item" data-fmode="join">
          <div class="opt-icon">ğŸ”</div><div class="opt-label">Join</div><div class="opt-desc">Enter a code</div>
        </div>
      </div>

      <!-- Host section -->
      <div id="hostSection">
        <div class="form-lbl">Board Style</div>
        <div class="opt-grid" id="friendBoardStyleGrid">
          <div class="opt-item sel" data-style="classic">
            <div class="opt-icon">ğŸ¯</div><div class="opt-label">Classic</div><div class="opt-desc">4 tokens each</div>
          </div>
          <div class="opt-item" data-style="double">
            <div class="opt-icon">â™Ÿ</div><div class="opt-label">Double</div><div class="opt-desc">8 tokens each</div>
          </div>
        </div>
        <button class="btn btn-blue" id="hostGameBtn">ğŸ  Create Room</button>
      </div>

      <!-- Join section -->
      <div id="joinSection" style="display:none">
        <div style="text-align:center;margin-bottom:8px;font-size:.82rem;color:var(--muted)">Enter the 4-digit room code</div>
        <div class="code-inputs" id="codeInputs">
          <div class="code-box" id="cb0">_</div>
          <div class="code-box" id="cb1">_</div>
          <div class="code-box" id="cb2">_</div>
          <div class="code-box" id="cb3">_</div>
        </div>
        <input type="text" id="joinCodeInputHidden" inputmode="numeric" maxlength="4" autocomplete="off"
          style="position:absolute;opacity:0;width:1px;height:1px;left:0;top:0;">
        <button class="btn btn-blue" id="joinGameBtn">ğŸ” Join Room</button>
      </div>

      <!-- Room Waiting -->
      <div id="roomWaiting" style="display:none">
        <div class="room-code-box">
          <div class="room-code-digits" id="displayRoomCode">â€”â€”</div>
          <div class="room-code-hint">Share this code with your friend</div>
          <div class="room-share-btn" id="shareCodeBtn">ğŸ“‹ Copy Code</div>
        </div>
        <div class="room-players">
          <div class="rp-slot rp-filled">
            <div class="rp-icon">âœ…</div>
            <div id="hostSlotName">You (Host)</div>
          </div>
          <div class="rp-slot" id="guestSlot">
            <div class="rp-icon">â³</div>
            Waiting...
          </div>
        </div>
        <div class="spin-ring" style="width:28px;height:28px;border-width:2px;margin:8px auto;"></div>
        <button class="btn btn-outline" id="cancelRoomBtn" style="margin-top:6px">Cancel Room</button>
      </div>
      <div style="height:16px"></div>
    </div>
  </div>
</div>

<!-- Bet Mode -->
<div class="modal" id="betModal">
  <div class="modal-sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-title">ğŸ’° Bet &amp; Win</div>
    <div class="sheet-sub">Choose your stake â€” matched fairly with another player</div>
    <div class="sheet-body">
      <div class="legal-warn">âš ï¸ Only stake what you can afford. 18+ only. Stakes are non-refundable once matched.</div>
      <div class="form-lbl">Select Stake</div>
      <div class="bet-grid">
        <div class="bet-card" data-stake="50"   data-win="80">
          <div class="bet-badge">Popular</div>
          <div class="bet-stake">â‚¦50 <span class="bet-stake-lbl">stake</span></div>
          <div class="bet-win">Win â‚¦80 ğŸ†</div>
        </div>
        <div class="bet-card" data-stake="100"  data-win="150">
          <div class="bet-stake">â‚¦100 <span class="bet-stake-lbl">stake</span></div>
          <div class="bet-win">Win â‚¦150 ğŸ†</div>
        </div>
        <div class="bet-card" data-stake="200"  data-win="350">
          <div class="bet-stake">â‚¦200 <span class="bet-stake-lbl">stake</span></div>
          <div class="bet-win">Win â‚¦350 ğŸ†</div>
        </div>
        <div class="bet-card" data-stake="500"  data-win="900">
          <div class="bet-badge" style="color:var(--cyan);background:rgba(6,182,212,0.1)">Hot</div>
          <div class="bet-stake">â‚¦500 <span class="bet-stake-lbl">stake</span></div>
          <div class="bet-win">Win â‚¦900 ğŸ†</div>
        </div>
        <div class="bet-card" data-stake="1000" data-win="1800">
          <div class="bet-stake">â‚¦1,000 <span class="bet-stake-lbl">stake</span></div>
          <div class="bet-win">Win â‚¦1,800 ğŸ†</div>
        </div>
        <div class="bet-card" data-stake="2000" data-win="3600">
          <div class="bet-badge" style="color:#a855f7;background:rgba(168,85,247,0.1)">VIP</div>
          <div class="bet-stake">â‚¦2,000 <span class="bet-stake-lbl">stake</span></div>
          <div class="bet-win">Win â‚¦3,600 ğŸ†</div>
        </div>
      </div>
      <div id="selectedBetInfo" style="text-align:center;font-size:.82rem;color:var(--muted);margin-bottom:12px">
        Select a stake amount above
      </div>
      <button class="btn btn-gold" id="startSearchBtn" disabled>Search for Opponent ğŸ”</button>
      <div style="text-align:center;font-size:.7rem;color:var(--muted);margin-top:8px;padding-bottom:8px">
        Stake deducted at search. Refunded if no match in 60s.
      </div>
    </div>
  </div>
</div>

<!-- Matchmaking -->
<div class="modal" id="matchmakingModal">
  <div class="match-box">
    <div class="spin-ring"></div>
    <div class="match-title">Finding Opponent</div>
    <div class="match-desc" id="matchDesc">Searching for a player...</div>
    <div class="match-stake" id="matchStakeDisplay"></div>
    <div class="match-timer" id="matchTimer">0s</div>
    <button class="btn btn-outline" id="cancelMatchBtn" style="margin-top:16px;padding:10px">Cancel</button>
  </div>
</div>

<!-- Settings -->
<div class="modal" id="settingsModal">
  <div class="modal-sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-title">âš™ï¸ Settings</div>
    <div class="sheet-body">
      <div class="settings-row">
        <div>
          <div class="sr-label">ğŸ”Š Sound Effects</div>
          <div class="sr-desc">Dice, moves, captures</div>
        </div>
        <div class="toggle on" id="soundToggle"><div class="toggle-knob"></div></div>
      </div>
      <div class="settings-row">
        <div>
          <div class="sr-label">ğŸµ Background Music</div>
          <div class="sr-desc">Advanced game rhythm</div>
        </div>
        <div class="toggle" id="musicToggle"><div class="toggle-knob"></div></div>
      </div>
      <div class="settings-row">
        <div>
          <div class="sr-label">âœ¨ Animations</div>
          <div class="sr-desc">Token and board effects</div>
        </div>
        <div class="toggle on" id="animToggle"><div class="toggle-knob"></div></div>
      </div>
      <div class="divider"></div>
      <div class="settings-row" id="termsSettingsBtn" style="cursor:pointer">
        <div><div class="sr-label">ğŸ“œ Terms &amp; Conditions</div></div>
        <div style="color:var(--muted)">â€º</div>
      </div>
      <div class="settings-row" id="privacySettingsBtn" style="cursor:pointer">
        <div><div class="sr-label">ğŸ”’ Privacy Policy</div></div>
        <div style="color:var(--muted)">â€º</div>
      </div>
      <div style="margin-top:14px;padding-bottom:4px">
        <button class="btn btn-outline" id="settingsClose">Done</button>
      </div>
    </div>
  </div>
</div>

<!-- Tutorial -->
<div class="modal" id="tutorialModal">
  <div class="modal-sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-title">ğŸ“– How to Play</div>
    <div class="sheet-sub">Master Globals Ludo</div>
    <div class="sheet-body">
      <div class="tut-step">
        <div class="tut-num">1</div>
        <div class="tut-text">
          <h4>Roll the Dice</h4>
          <p>Tap "Roll Dice" on your turn. Roll a 6 to bring a token out of your home base.</p>
        </div>
      </div>
      <div class="tut-step">
        <div class="tut-num">2</div>
        <div class="tut-text">
          <h4>Move Tokens</h4>
          <p>Tap any eligible token to move it. Tokens travel clockwise. First to get all tokens home wins!</p>
        </div>
      </div>
      <div class="tut-step">
        <div class="tut-num">3</div>
        <div class="tut-text">
          <h4>Capture Opponents</h4>
          <p>Land on an opponent to send them back! Safe squares (â­) protect tokens from capture.</p>
        </div>
      </div>
      <div class="tut-step">
        <div class="tut-num">4</div>
        <div class="tut-text">
          <h4>Roll 6 = Extra Turn</h4>
          <p>Rolling a 6 gives you another roll! Use this to enter more tokens or chase opponents.</p>
        </div>
      </div>
      <div class="tut-step">
        <div class="tut-num">5</div>
        <div class="tut-text">
          <h4>10-Second Timer</h4>
          <p>You have 10 seconds per turn. Watch the circular countdown â€” if it hits zero, your turn is passed.</p>
        </div>
      </div>
      <div class="tut-step">
        <div class="tut-num">6</div>
        <div class="tut-text">
          <h4>Bet Mode</h4>
          <p>Pick a stake and get matched with a player staking the same. Winner takes the prize!</p>
        </div>
      </div>
      <button class="btn btn-orange" id="tutorialClose" style="margin-top:4px">Got it! ğŸ®</button>
      <div style="height:12px"></div>
    </div>
  </div>
</div>

<!-- Chat Support -->
<div class="modal" id="chatModal">
  <div class="modal-sheet" style="height:88vh;display:flex;flex-direction:column;padding-bottom:0;">
    <div class="sheet-handle"></div>
    <div class="sheet-title">ğŸ’¬ Game Support</div>
    <div class="sheet-sub" style="padding-bottom:0;">Ask anything about Globals Ludo</div>
    <div class="chat-msgs" id="chatMessages">
      <div class="chat-msg ai">
        <div class="chat-bubble">ğŸ‘‹ Hi! I'm your Globals Ludo assistant. Ask me about rules, bet mode, room codes, or anything else!</div>
      </div>
    </div>
    <div class="chat-in-row">
      <input class="chat-in" id="chatInput" placeholder="Ask a question..." />
      <button class="chat-send-btn" id="chatSendBtn">Send</button>
    </div>
    <div style="padding:8px 18px 12px;text-align:center">
      <button class="btn btn-outline" id="chatClose" style="font-size:.75rem;padding:8px 20px;width:auto">Close</button>
    </div>
  </div>
</div>

<!-- Terms -->
<div class="modal" id="termsModal">
  <div class="modal-sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-title">ğŸ“œ Terms &amp; Conditions</div>
    <div class="sheet-body">
      <div class="legal-warn">âš ï¸ Globals Ludo includes real-money betting. Read carefully before playing.</div>
      <div class="legal-sec"><h3>1. Eligibility</h3><p>You must be 18+ to play real-money games. By playing, you confirm you meet this requirement and that betting is legal in your jurisdiction.</p></div>
      <div class="legal-sec"><h3>2. Fair Play</h3><p>All games are governed by randomness and skill. Manipulation, bug exploitation, or unauthorized tools result in immediate account termination.</p></div>
      <div class="legal-sec"><h3>3. Bet Rules</h3><p>Stakes are deducted before matchmaking begins. Winnings are credited upon game completion. All transactions are final.</p></div>
      <div class="legal-sec"><h3>4. Responsible Gambling</h3><p>We encourage responsible gambling. Set personal limits. If gambling becomes problematic, seek support from certified organizations. Globals is not liable for losses from irresponsible play.</p></div>
      <div class="legal-sec"><h3>5. Deposits &amp; Withdrawals</h3><p>Deposits are handled exclusively through the main Globals platform. Globals Ludo shows your real-time balance but does not process deposits directly.</p></div>
      <div class="legal-sec"><h3>6. Disconnection Policy</h3><p>If a player intentionally disconnects during a bet game, the opponent wins. Accidental disconnection within 10 seconds allows reconnection without penalty.</p></div>
      <div class="legal-sec"><h3>7. Changes to Terms</h3><p>Globals may modify terms at any time. Continued use implies acceptance of updated terms.</p></div>
      <button class="btn btn-outline" id="termsClose" style="margin-top:4px">I Understand</button>
      <div style="height:12px"></div>
    </div>
  </div>
</div>

<!-- Privacy -->
<div class="modal" id="privacyModal">
  <div class="modal-sheet">
    <div class="sheet-handle"></div>
    <div class="sheet-title">ğŸ”’ Privacy Policy</div>
    <div class="sheet-body">
      <div class="legal-sec"><h3>Data We Collect</h3><p>Username, Firebase UID, game history, transaction records, and device information for service delivery and fraud prevention.</p></div>
      <div class="legal-sec"><h3>How We Use It</h3><p>To manage accounts, enable fair matchmaking, process transactions, prevent cheating, and improve our platform. Your data is never sold to third parties.</p></div>
      <div class="legal-sec"><h3>Storage</h3><p>Securely stored in Google Firebase with industry-standard encryption. Records retained for 2 years.</p></div>
      <div class="legal-sec"><h3>Your Rights</h3><p>Request deletion of your data anytime by contacting Globals support. Transaction records may be retained for legal compliance.</p></div>
      <button class="btn btn-outline" id="privacyClose" style="margin-top:4px">Close</button>
      <div style="height:12px"></div>
    </div>
  </div>
</div>

<!-- Quit Confirm -->
<div class="modal" id="quitConfirmModal">
  <div class="dialog-box">
    <div class="dialog-icon">ğŸšª</div>
    <div class="dialog-title">Quit Game?</div>
    <div class="dialog-desc">Are you sure? <span id="quitNote"></span></div>
    <button class="btn btn-red" id="confirmQuitBtn" style="width:100%">Yes, Quit</button>
    <button class="btn btn-outline" id="cancelQuitBtn" style="width:100%;margin-top:8px">Keep Playing</button>
  </div>
</div>

<!-- No Internet -->
<div class="modal" id="noInternetModal">
  <div class="offline-box">
    <div style="font-size:3rem;margin-bottom:12px">ğŸ“¡</div>
    <div style="font-family:var(--font-head);font-size:1.2rem;font-weight:800;color:var(--red);margin-bottom:8px">No Connection</div>
    <div style="font-size:.82rem;color:var(--muted);line-height:1.5;">You're offline. Check your internet. Multiplayer requires a stable connection.</div>
    <button class="btn btn-outline" id="retryConnectionBtn" style="margin-top:14px;padding:10px">Retry</button>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
// â”€â”€ FIREBASE CONFIG â”€â”€
const firebaseConfig = {
  apiKey: "AIzaSyCuI_Nw4HMbDWa6wR3FhHJMHOUgx53E40c",
  authDomain: "globals-17bf7.firebaseapp.com",
  projectId: "globals-17bf7",
  storageBucket: "globals-17bf7.appspot.com",
  messagingSenderId: "603274362994",
  appId: "1:603274362994:web:c312c10cf0a42938e882eb"
};
if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
</script>
<script src="Ludo.js"></script>
</body>
</html>
